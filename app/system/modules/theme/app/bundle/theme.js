!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=6)}([function(t,e){t.exports=UIkit.util},function(t,e){t.exports=UIkit},function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e){t.exports=Vue},function(t,e){function i(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=i=function(t){return typeof t}:t.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(e)}t.exports=i},,function(t,e,i){"use strict";i.r(e);var n=i(3),r=i.n(n),o=i(1),s=i.n(o),a=i(0),c={name:"Menu",mixins:[Theme.Mixins.Helper,Theme.Mixins.Components],type:"theme-menu",data:function(){return _.extend({nav:null,item:null,subnav:null,size:null,sb:this.$session.get("admin.sidebar",!1),breakpoint:!1},window.$pagekit)},created:function(){var t=_(this.menu).sortBy("priority").groupBy("parent").value(),e=_.find(t.root,"active");this.nav=t.root,e&&(this.item=e,this.subnav=t[e.id]),window.addEventListener("resize",this.checkmedia),this.checkmedia()},methods:{checkmedia:function(){this.breakpoint=!!window.matchMedia("(min-width: 1200px)").matches},isActiveParent:function(t){return!(void 0===_(this.menu).sortBy("priority").groupBy("parent").value()[t.id]||!t.active)},getChildren:function(t){var e=_(this.menu).sortBy("priority").groupBy("parent").value();return void 0!==e[t.id]?e[t.id]:[]},getActive:function(t){var e=_.filter(t,(function(t){return t.active}))[0];return e&&e.label}}},l=i(2),d=i.n(l);function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var h,b={name:"sidebar",mixins:[c],type:"theme-menu",data:function(){return{sidemenu:Theme&&Theme.SidebarItems?Theme.SidebarItems:[],sbReady:!1}},theme:{elements:function(){var t=this;return{menuitem:{scope:"sidemenu",type:"dropdown",icon:{class:function(){return"tm-menu-image"},attrs:{"uk-navbar-toggle-icon":!0},internal:!0},dropdown:{options:function(){return t.sb&&t.breakpoint?"pos: bottom-right; mode: click; offset: 0;":"pos: right-top; mode: hover; offset: 0; delayHide: 0"},class:function(){return t.sb&&t.breakpoint?{"tm-dropdown-parent-items uk-position-fixed tm-left":!0}:{"tm-dropdown-parent-items uk-position-fixed":!0}},style:function(){if(t.sb)return{width:t.size}}},items:function(){return t.sidemenu.menuitem?t.sidemenu.menuitem:[]},priority:0},additem:{scope:"sidemenu",type:"dropdown",icon:{class:function(){return"tm-menu-image"},attrs:{"uk-icon":"plus",ratio:1.2},internal:!0},dropdown:{options:function(){return t.sb&&t.breakpoint?"pos: bottom-right; mode: click; offset: 0;":"pos: right-top; mode: hover; offset: 0; delayHide: 0"},class:function(){return t.sb&&t.breakpoint?{"tm-dropdown-parent-items uk-position-fixed tm-left":!0}:{"tm-dropdown-parent-items uk-position-fixed":!0}},style:function(){if(t.sb)return{width:t.size}}},items:function(){return t.sidemenu.additem?t.sidemenu.additem:[]},priority:1}}}},computed:{sbStyle:function(){return this.sb?{width:this.size}:{}}},created:function(){var t=this;this.size=this.sbSize(this.nav),this.$el=this.$el||Object(a.$)(".tm-sidebar-left"),this.$nextTick((function(){t.page=Object(a.$)(".tm-page"),t.sb&&(Object(a.css)(t.page,"margin-left",t.size),Object(a.addClass)(t.$el,"tm-sidebar-open"))}))},mounted:function(){var t=this;document.hidden?UIkit.util.on(window,"focus",(function(e){t.sbReady=!0})):this.sbReady=!0},methods:{toggleSidebar:function(){var t=Object(a.$)(".tm-action-buttons",this.$el),e=Object(a.findAll)("li:not(.tm-toggle-sidebar)",t);this.sb||Object(a.css)(e,"display","none"),this.sb=!this.sb,this.setStyle(),this.$session.set("admin.sidebar",this.sb),this.sb&&setTimeout((function(){Object(a.css)(e,"display","list-item")}),200)},showDropdown:function(t){return!(!this.getChildren(t).length||!this.sbReady)&&(!this.sb||!t.active||!this.breakpoint)},setStyle:function(){Object(a.hasClass)(this.page,"transition")||Object(a.addClass)(this.page,"transition"),this.sb?(Object(a.addClass)(this.$el,"tm-sidebar-open"),Object(a.css)(this.page,"margin-left",this.size)):(Object(a.removeClass)(this.$el,"tm-sidebar-open"),Object(a.css)(this.page,"margin-left",""))},sbSize:function(t){var e,i,n=this,r=Object(a.$)(".tm-sidebar-menu > li > a > .tm-menu-text"),o=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){d()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t),s=r?Object(a.css)(r,"font"):"";if(!s&&r){var c=Object(a.css)(r,["font-style","font-variant","font-weight","font-size","font-family"]);s=Object.values(c).join(" ").replace(/ +/g," ").trim()}return o=_.map(o,(function(t){return n.textSize(n.$trans(t.label),s)})),i=Math.max.apply(null,o),e=10*Math.ceil((55+i+35)/10),"".concat(e?e<220?220:e:220,"px")},textSize:function(t,e){var i=document.createElement("canvas").getContext("2d");return i.font=e,i.measureText(t).width}}},p=i(4),f=i.n(p);function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}s.a.component("Autocomplete",{props:{minLength:Number,delay:Number,loadingClass:String,flipDropdown:Boolean,skipClass:String,hoverClass:String,source:null,renderer:null,template:String},data:function(){return{minLength:3,param:"search",method:"post",delay:300,loadingClass:"uk-loading",flipDropdown:!1,skipClass:"uk-skip",hoverClass:"uk-active",source:null,renderer:null,template:'<ul class="uk-nav uk-nav-autocomplete uk-autocomplete-results">{{~items}}<li data-value="{{$item.value}}"><a>{{$item.value}}</a></li>{{/items}}</ul>',visible:!1,value:null,selected:null}},created:function(){this.template=this.rtemplate(this.template),this.dropdown=Object(a.$)('<div class="uk-dropdown"></div>'),Object(a.attr)(this.dropdown,"aria-expanded","false")},connected:function(){var t=this;this.isSelect=!1,this.trigger=this.debounce((function(e){if(this.isSelect)return this.isSelect=!1;t.handle()}),this.delay),Object(a.on)(document,"click",(function(t){h&&t.target!=h.input[0]&&h.hide()})),Object(a.append)(this.$el,this.dropdown),Object(a.attr)(Object(a.find)("input",this.$el),"autocomplete","off"),this.input=Object(a.find)("input",this.$el),this.triggercomplete=this.trigger},events:[{name:"keydown",delegate:function(){return"input"},handler:function(t){if(t&&t.which&&!t.shiftKey&&this.visible)switch(t.which){case 13:this.isSelect=!0,this.selected&&(t.preventDefault(),this.select());break;case 38:t.preventDefault(),this.pick("prev",!0);break;case 40:t.preventDefault(),this.pick("next",!0);break;case 27:case 9:this.hide()}}},{name:"keyup",delegate:function(){return"input"},handler:function(t){this.trigger(t)}},{name:"click",delegate:function(){return".uk-autocomplete-results > *"},handler:function(t){this.select()}},{name:"mouseover",delegate:function(){return".uk-autocomplete-results > *"},handler:function(t){"li"==t.target.parentNode.tagName.toLowerCase()&&this.pick(Object(a.$)(t.target.parentNode))}}],methods:{handle:function(){var t=this.value;return this.value=this.input.value,this.value.length<this.minLength?this.hide():(this.value!=t&&this.request(),this)},debounce:function(t,e,i){var n;return function(){var r=this,o=arguments,s=function(){n=null,i||t.apply(r,o)},a=i&&!n;clearTimeout(n),n=setTimeout(s,e),a&&t.apply(r,o)}},pick:function(t,e){var i=this,n=Object(a.findAll)(">:not(.".concat(this.skipClass,")"),Object(a.find)(".uk-autocomplete-results",Object(a.$)(this.dropdown))),r=!1;if("string"==typeof t||Object(a.hasClass)(Object(a.$)(t),this.skipClass)){if("next"==t||"prev"==t){if(this.selected){var o=Object(a.getIndex)(this.selected,n);r="next"==t?Object(a.toNodes)(n)[o+1<n.length?o+1:0]:Object(a.toNodes)(n)[o-1<0?n.length-1:o-1]}else r=this.selected?n[Object(a.getIndex)("next"==t?"next":"previous",n)]:n[0];r=Object(a.$)(r)}}else r=t;if(r&&(this.selected=r,n.forEach((function(t){Object(a.removeClass)(t,i.hoverClass)})),Object(a.addClass)(Object(a.$)(this.selected),this.hoverClass),e)){var c=r.getBoundingClientRect().top,l=i.dropdown.scrollTop;(c>i.dropdown.offsetHeight||c<0)&&s.a.util.scrollTop(i.dropdown,l+c)}},select:function(){if(this.selected){var t=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){d()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},this.selected.dataset);Object(a.trigger)(this.$el,"select",[this,t]),t.value&&(this.input.value=t.value,Object(a.trigger)(this.input,"change")),this.hide()}},show:function(){if(!this.visible)return this.visible=!0,Object(a.addClass)(Object(a.$)(this.dropdown),"uk-open"),h&&h!==this&&h.hide(),h=this,Object(a.attr)(Object(a.$)(this.dropdown),"aria-expanded","true"),this},hide:function(){if(this.visible)return this.visible=!1,Object(a.removeClass)(Object(a.$)(this.dropdown),"uk-open"),h===this&&(h=!1),Object(a.attr)(Object(a.$)(this.dropdown),"aria-expanded","false"),this},request:function(){var t=this,e=function(e){e&&t.render(e),Object(a.removeClass)(t.$el,t.loadingClass)};if(Object(a.addClass)(this.$el,this.loadingClass),this.source){var i=this.source;switch(f()(this.source)){case"function":this.source.apply(this,[e]);break;case"object":if(i.length){var n=[];i.forEach((function(e){e.value&&-1!=e.value.toLowerCase().indexOf(t.value.toLowerCase())&&n.push(e)})),e(n)}break;case"string":var r={};r[this.param]=this.value,UI.$.ajax({url:this.source,data:r,type:this.method,dataType:"json"}).done((function(t){e(t||[])}));break;default:e(null)}}else Object(a.removeClass)(this.$el,t.loadingClass)},render:function(t){return Object(a.empty)(Object(a.$)(this.dropdown)),this.selected=!1,this.renderer?this.renderer.apply(this,[t]):t&&t.length&&(this.dropdown.append(this.template({items:t})),Object(a.append)(this.dropdown,this.template({items:t})),this.show(),this.trigger("show")),this},rtemplate:function(t,e){for(var i,n,r,o,s=t.replace(/\n/g,"\\n").replace(/\{\{\{\s*(.+?)\s*\}\}\}/g,"{{!$1}}").split(/(\{\{\s*(.+?)\s*\}\})/g),a=0,c=[],l=0;a<s.length;){if((i=s[a]).match(/\{\{\s*(.+?)\s*\}\}/))switch(n=(i=s[a+=1])[0],r=i.substring(i.match(/^(\^|\#|\!|\~|\:)/)?1:0),n){case"~":c.push("for(var $i=0;$i<".concat(r,".length;$i++) { var $item = ").concat(r,"[$i];")),l++;break;case":":c.push("for(var $key in ".concat(r,") { var $val = ").concat(r,"[$key];")),l++;break;case"#":c.push("if(".concat(r,") {")),l++;break;case"^":c.push("if(!".concat(r,") {")),l++;break;case"/":c.push("}"),l--;break;case"!":c.push("__ret.push(".concat(r,");"));break;default:c.push("__ret.push(escape(".concat(r,"));"))}else c.push("__ret.push('".concat(i.replace(/\'/g,"\\'"),"');"));a+=1}return o=new Function("$data",["var __ret = [];","try {","with($data){",l?'__ret = ["Not all blocks are closed correctly."]':c.join(""),"};","}catch(e){__ret = [e.message];}",'return __ret.join("").replace(/\\n\\n/g, "\\n");',"function escape(html) { return String(html).replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');}"].join("\n")),e?o(e):o}}}),s.a.component("Pagination",{props:{items:Number,itemsOnPage:Number,pages:Number,displayedPages:Number,edges:Number,currentPage:Number,lblPrev:Boolean,lblNext:Boolean,onSelectPage:function(){}},data:function(){return{items:1,itemsOnPage:1,pages:0,displayedPages:7,edges:1,currentPage:0,lblPrev:!1,lblNext:!1,onSelectPage:function(){}}},connected:function(){this.pages=this.pages?this.pages:Math.ceil(this.items/this.itemsOnPage)?Math.ceil(this.items/this.itemsOnPage):1,this.currentPage=this.currentPage,this.halfDisplayed=this.displayedPages/2},events:[{name:"click",delegate:function(){return"a[data-page]"},handler:function(t){t.preventDefault(),this.selectPage(Object(a.data)(Object(a.closest)(t.target,"a[data-page]"),"page"))}}],methods:{_getInterval:function(){return{start:Math.ceil(this.currentPage>this.halfDisplayed?Math.max(Math.min(this.currentPage-this.halfDisplayed,this.pages-this.displayedPages),0):0),end:Math.ceil(this.currentPage>this.halfDisplayed?Math.min(this.currentPage+this.halfDisplayed,this.pages):Math.min(this.displayedPages,this.pages))}},render:function(t){this.pages=t||this.pages,this._render()},selectPage:function(t,e){this.currentPage=t,this.render(e),this.onSelectPage.apply(this,[t]),Object(a.trigger)(this.$el,"select.uk.pagination",[this,t])},_render:function(){var t,e=this,i=this._getInterval();if(!(this.displayedPages-(i.end-i.start)<0)){if(Object(a.empty)(Object(a.$)(this.$el)),e.lblPrev&&this._append(this.currentPage-1,{text:e.lblPrev}),i.start>0&&e.edges>0){var n=Math.min(e.edges,i.start);for(t=0;t<n;t++)this._append(t);e.edges<i.start&&i.start-e.edges!=1?Object(a.append)(this.$el,'<li class="uk-disabled"><span>...</span></li>'):i.start-e.edges==1&&this._append(e.edges)}for(t=i.start;t<i.end;t++)this._append(t);if(i.end<this.pages&&e.edges>0)for(this.pages-e.edges>i.end&&this.pages-e.edges-i.end!=1?Object(a.append)(this.$el,'<li class="uk-disabled"><span>...</span></li>'):this.pages-e.edges-i.end==1&&this._append(i.end++),t=Math.max(this.pages-e.edges,i.end);t<this.pages;t++)this._append(t);e.lblNext&&this._append(this.currentPage+1,{text:e.lblNext})}},_append:function(t,e){var i,n;if(n=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){d()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({text:(t=t<0?0:t<this.pages?t:this.pages-1)+1},e),i=t==this.currentPage?'<li class="uk-active"><span>'.concat(n.text,"</span></li>"):'<li><a href="#page-'.concat(t+1,'" data-page="').concat(t,'">').concat(n.text,"</a></li>"),"string"==typeof n.text){String(n.text);i=t==this.currentPage?'<li class="uk-hidden"><span>'.concat(n.text,"</span></li>"):i}"boolean"!=typeof n.text&&Object(a.append)(this.$el,i)}}});var v=[];function O(t,e,i){var n;return function(){var r=this,o=arguments,s=function(){n=null,i||t.apply(r,o)},a=i&&!n;clearTimeout(n),n=setTimeout(s,e),a&&t.apply(r,o)}}s.a.component("Htmleditor",{props:{lblPreview:String,lblCodeview:String},data:function(){return{iframe:!1,mode:"split",markdown:!1,autocomplete:!0,enablescripts:!1,height:500,maxsplitsize:1e3,codemirror:{mode:"htmlmixed",lineWrapping:!0,dragDrop:!1,autoCloseTags:!0,matchTags:!0,autoCloseBrackets:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!1,tabSize:4,hintOptions:{completionSingle:!1}},toolbar:["bold","italic","strike","link","image","blockquote","listUl","listOl"],lblPreview:"Preview",lblCodeview:"HTML",lblMarkedview:"Markdown",template:['<div class="uk-htmleditor uk-clearfix" data-mode="split">','<div class="uk-htmleditor-navbar">','<div class="uk-flex uk-flex-between">',"<div>",'<ul class="uk-htmleditor-navbar-nav uk-htmleditor-toolbar"></ul>',"</div>",'<div class="uk-htmleditor-navbar-flip">','<ul class="uk-htmleditor-navbar-nav uk-flex-inline">','<li class="uk-htmleditor-button-code"><a>{:lblCodeview}</a></li>','<li class="uk-htmleditor-button-preview"><a>{:lblPreview}</a></li>','<li><a data-htmleditor-button="fullscreen"><i uk-icon="expand"></i></a></li>',"</ul>","</div>","</div>","</div>",'<div class="uk-htmleditor-content">','<div class="uk-htmleditor-code"></div>','<div class="uk-htmleditor-preview"><div></div></div>',"</div>","</div>"].join(""),connected:!1}},computed:{isConnect:{get:function(){return this.connected&&Object(a.find)("textarea",this.code)},watch:function(){this.isConnect&&this.create()}}},created:function(){var t=this,e=this.template;this.CodeMirror=this.CodeMirror||CodeMirror,this.buttons={},e=(e=e.replace(/\{:lblPreview}/g,this.lblPreview)).replace(/\{:lblCodeview}/g,this.lblCodeview),this.htmleditor=Object(a.$)(e),this.content=Object(a.find)(".uk-htmleditor-content",this.htmleditor),this.$toolbar=Object(a.find)(".uk-htmleditor-toolbar",this.htmleditor),this.preview=Object(a.find)(".uk-htmleditor-preview",this.htmleditor).children[0],this.code=Object(a.find)(".uk-htmleditor-code",this.htmleditor),this.debouncedRedraw=O((function(){t.redraw()}),5)},beforeConnect:function(){},connected:function(){this.isConnect?this.create():(Object(a.before)(this.$el,this.htmleditor),Object(a.append)(this.code,this.$el),this.connected=!this.connected)},dconnected:function(){this.observer&&this.observer.disconnect()},methods:{create:function(){var t=this;a.Promise.all([this.init(),this.initBase(),this.initMarked(),this.debouncedRedraw()]).then((function(){setTimeout((function(){Object(a.trigger)(t.$el,"init",[t])}),5)}))},init:function(){var t=this;this.editor=this.CodeMirror.fromTextArea(this.$el,this.codemirror),this.editor.htmleditor=this,this.editor.on("change",O((function(){t.render()}),150)),this.editor.on("change",(function(){t.editor.save(),Object(a.trigger)(t.$el,"input")})),Object(a.css)(Object(a.find)(".CodeMirror",this.code),"height",this.height),this.iframe?(this.$iframe=Object(a.$)('<iframe class="uk-htmleditor-iframe" frameborder="0" scrolling="auto" height="100" width="100%"></iframe>'),Object(a.append)(this.preview,this.$iframe),this.$iframe.contentWindow.document.open(),this.$iframe.contentWindow.document.close(),this.preview.container=Object(a.find)("body",Object(a.$)(this.$iframe.contentWindow.document)),"string"==typeof this.iframe&&Object(a.append)(this.preview.container.parentElement,'<link rel="stylesheet" href="'.concat(this.iframe,'">'))):this.preview.container=this.preview,Object(a.on)(window,"resize load",O((function(){t.fit()}),200));var e=this.iframe?this.preview.container:t.preview.parentNode,i=Object(a.find)(".CodeMirror-sizer",this.code),n=Object(a.find)(".CodeMirror-scroll",this.code);Object(a.on)(n,"scroll",O((function(){if("tab"!==t.htmleditor.getAttribute("data-mode")){var r=Object(a.height)(i)-Object(a.height)(n),o=(e.scrollHeight-(t.iframe?Object(a.height)(t.$iframe):Object(a.height)(e)))/r,s=n.scrollTop*o;Object(a.scrollTop)(e,s)}}),10)),Object(a.on)(this.htmleditor,"click",".uk-htmleditor-button-code, .uk-htmleditor-button-preview",(function(e){e.preventDefault(),"tab"==t.htmleditor.getAttribute("data-mode")&&(Object(a.removeClass)(Object(a.findAll)(".uk-htmleditor-button-code, .uk-htmleditor-button-preview",t.htmleditor),"uk-active"),Object(a.addClass)(Object(a.findAll)(".uk-htmleditor-button-code, .uk-htmleditor-button-preview",t.htmleditor).filter((function(t){return t===e.target.parentNode})),"uk-active"),t.activetab=Object(a.hasClass)(Object(a.$)(e.target.parentNode),"uk-htmleditor-button-code")?"code":"preview",Object(a.attr)(t.htmleditor,"data-active-tab",t.activetab),t.editor.refresh())})),Object(a.on)(this.htmleditor,"click","a[data-htmleditor-button]",(function(e){var i=Object(a.closest)(e.target,"a[data-htmleditor-button]");Array.isArray(i)||Object(a.isVisible)(t.code)&&Object(a.trigger)(t.$el,"action.".concat(Object(a.data)(i,"htmleditor-button")),[t.editor])})),Object(a.css)(this.preview.parentNode,"height",Object(a.height)(this.code)),this.autocomplete&&this.CodeMirror.showHint&&this.CodeMirror.hint&&this.CodeMirror.hint.html&&this.editor.on("inputRead",O((function(){var e=t.editor.getDoc().getCursor();if("xml"==t.CodeMirror.innerMode(t.editor.getMode(),t.editor.getTokenAt(e).state).mode.name){var i=t.editor.getCursor(),n=t.editor.getTokenAt(i);"<"!=n.string.charAt(0)&&"attribute"!=n.type||t.CodeMirror.showHint(t.editor,t.CodeMirror.hint.html,{completeSingle:!1})}}),100)),this.observe(Object(a.closest)(this.$el,"li")),v.push(this)},observe:function(t){var e=this;t&&(this.observer=new MutationObserver((function(){"none"!==t.style.display&&t.classList.contains("uk-active")&&e.debouncedRedraw()})),this.observer.observe(t,{attributes:!0,childList:!0}))},addButton:function(t,e){this.buttons[t]=e},addButtons:function(t){Object.assign(this.buttons,t)},replaceInPreview:function(t,e){var i=this.editor,n=[],r=i.getValue(),o=-1,s=0;function a(t){var e=i.getValue().substring(0,t).split("\n");return{line:e.length-1,ch:e[e.length-1].length}}return this.currentvalue=this.currentvalue.replace(t,(function(){var t={matches:arguments,from:a(o=r.indexOf(arguments[0],++o)),to:a(o+arguments[0].length),replace:function(e){i.replaceRange(e,t.from,t.to)},inRange:function(e){return e.line===t.from.line&&e.line===t.to.line?e.ch>=t.from.ch&&e.ch<t.to.ch:e.line===t.from.line&&e.ch>=t.from.ch||e.line>t.from.line&&e.line<t.to.line||e.line===t.to.line&&e.ch<t.to.ch}},c="string"==typeof e?e:e(t,s);return c||""===c?(s++,n.push(t),c):arguments[0]})),n},addToolbarButton:function(t){-1===this.toolbar.indexOf(t)&&this.toolbar.push(t)},_buildtoolbar:function(){if(this.toolbar&&this.toolbar.length){var t=this,e=[];Object(a.empty)(this.$toolbar),this.toolbar.forEach((function(i){if(t.buttons[i]){var n=t.buttons[i].title?t.buttons[i].title:i;e.push('<li><a data-htmleditor-button="'.concat(i,'" title="').concat(n,'" data-uk-tooltip>').concat(t.buttons[i].label,"</a></li>"))}})),Object(a.html)(this.$toolbar,e.join("\n"))}},fit:function(){var t=this,e=this.mode;"split"==e&&Object(a.width)(this.htmleditor)<this.maxsplitsize&&(e="tab"),"tab"==e&&(this.activetab||(this.activetab="code",Object(a.attr)(this.htmleditor,"data-active-tab",this.activetab)),Object(a.removeClass)(Object(a.findAll)(".uk-htmleditor-button-code, .uk-htmleditor-button-preview",this.htmleditor),"uk-active"),Object(a.addClass)(Object(a.findAll)(".uk-htmleditor-button-code, .uk-htmleditor-button-preview",this.htmleditor).filter((function(e){return Object(a.hasClass)(e,"code"==t.activetab?"uk-htmleditor-button-code":"uk-htmleditor-button-preview")})),"uk-active")),this.editor.refresh(),Object(a.css)(this.preview.parentNode,"height",Object(a.height)(this.code)||Object(a.css)(Object(a.$)(".CodeMirror",this.code),"height")),Object(a.attr)(this.htmleditor,"data-mode",e)},redraw:function(){this._buildtoolbar(),this.render(),this.fit()},getMode:function(){return this.editor.getOption("mode")},getCursorMode:function(){var t={mode:"html"};return Object(a.trigger)(this.$el,"cursorMode",[t]),t.mode},render:function(){if(this.currentvalue=this.editor.getValue(),this.enablescripts||(this.currentvalue=this.currentvalue.replace(/<(script|style)\b[^<]*(?:(?!<\/(script|style)>)<[^<]*)*<\/(script|style)>/gim,"")),!this.currentvalue)return this.$el.value="",void Object(a.html)(this.preview.container,"");Object(a.trigger)(this.$el,"render",[this]),Object(a.trigger)(this.$el,"renderLate",[this]),Object(a.html)(this.preview.container,this.currentvalue)},addShortcut:function(t,e){var i={};return Array.isArray(t)||(t=[t]),t.forEach((function(t){i[t]=e})),this.editor.addKeyMap(i),i},addShortcutAction:function(t,e){var i=this;this.addShortcut(e,(function(){Object(a.trigger)(i.$el,"action.".concat(t),[i.editor])}))},replaceSelection:function(t){var e=this.editor.getSelection();if(!e.length){for(var i=this.editor.getCursor(),n=this.editor.getLine(i.line),r=i.ch,o=r;o<n.length&&/[\w$]+/.test(n.charAt(o));)++o;for(;r&&/[\w$]+/.test(n.charAt(r-1));)--r;var s=r!=o&&n.slice(r,o);s&&(this.editor.setSelection({line:i.line,ch:r},{line:i.line,ch:o}),e=s)}var a=t.replace("$1",e);this.editor.replaceSelection(a,"end"),this.editor.focus()},replaceLine:function(t){var e=this.editor.getDoc().getCursor(),i=this.editor.getLine(e.line),n=t.replace("$1",i);this.editor.replaceRange(n,{line:e.line,ch:0},{line:e.line,ch:i.length}),this.editor.setCursor({line:e.line,ch:n.length}),this.editor.focus()},save:function(){this.editor.save()},initBase:function(){var t=this,e=this;this.transformed=[],t.addButtons({fullscreen:{title:"Fullscreen",label:'<i uk-icon="expand"></i>'},bold:{title:"Bold",label:'<i uk-icon="bold"></i>'},italic:{title:"Italic",label:'<i uk-icon="italic"></i>'},strike:{title:"Strikethrough",label:'<i uk-icon="strikethrough"></i>'},blockquote:{title:"Blockquote",label:'<i uk-icon="quote-right"></i>'},link:{title:"Link",label:'<i uk-icon="link"></i>'},image:{title:"Image",label:'<i uk-icon="image"></i>'},listUl:{title:"Unordered List",label:'<i uk-icon="menu"></i>'},listOl:{title:"Ordered List",label:'<i uk-icon="list"></i>'}}),n("bold","<strong>$1</strong>"),n("italic","<em>$1</em>"),n("strike","<del>$1</del>"),n("blockquote","<blockquote><p>$1</p></blockquote>","replaceLine"),n("link",'<a href="http://">$1</a>'),n("image",'<img src="http://" alt="$1">');var i=function(e){if("html"==t.getCursorMode()){e=e||"ul";for(var i=t.editor,n=i.getDoc(),r=n.getCursor(!0),o=n.getCursor(!1),s=CodeMirror.innerMode(i.getMode(),i.getTokenAt(i.getCursor()).state),a=s&&s.state&&s.state.context&&-1!=["ul","ol"].indexOf(s.state.context.tagName),c=r.line;c<o.line+1;c++)i.replaceRange("<li>".concat(i.getLine(c),"</li>"),{line:c,ch:0},{line:c,ch:i.getLine(c).length});a?i.setCursor({line:o.line,ch:i.getLine(o.line).length}):(i.replaceRange("<".concat(e,">")+"\n".concat(i.getLine(r.line)),{line:r.line,ch:0},{line:r.line,ch:i.getLine(r.line).length}),i.replaceRange("".concat(i.getLine(o.line+1),"\n")+"</".concat(e,">"),{line:o.line+1,ch:0},{line:o.line+1,ch:i.getLine(o.line+1).length}),i.setCursor({line:o.line+1,ch:i.getLine(o.line+1).length})),i.focus()}};function n(e,i,n){Object(a.on)(t.$el,"action.".concat(e),(function(e){"html"==t.getCursorMode()&&t["replaceLine"==n?"replaceLine":"replaceSelection"](i)}))}Object(a.on)(t.$el,"action.listUl",(function(){i("ul")})),Object(a.on)(t.$el,"action.listOl",(function(){i("ol")})),Object(a.on)(t.htmleditor,"click",'a[data-htmleditor-button="fullscreen"]',(function(i){var n=Object(a.closest)(i.target,"a[data-htmleditor-button]");if(!Array.isArray(n)){var r=Object(a.offset)(window).top;Object(a.toggleClass)(document.documentElement,"uk-htmleditor-fullscreen-wrap"),Object(a.toggleClass)(document.body,"uk-htmleditor-fullscreen-wrap"),Object(a.toggleClass)(t.htmleditor,"uk-htmleditor-resize"),Object(a.toggleClass)(t.htmleditor,"uk-htmleditor-fullscreen");var o=t.editor.getWrapperElement();if(Object(a.hasClass)(t.htmleditor,"uk-htmleditor-fullscreen")){var s=!1,c=Object(a.parents)(t.htmleditor,"*");c.forEach((function(t){"fixed"===Object(a.css)(t,"position")&&"html"!==t.tagName&&(s=t)})),Object(a.attr)(t.htmleditor,"data-fixed-parents",!1),s&&((s=c.filter((function(t){return"html"!==s.tagName&&-1!==s.parentNode.outerHTML.indexOf(t.outerHTML)&&s.parentNode!==t}))).forEach((function(t){"none"!=Object(a.css)(t,"transform")&&(Object(a.attr)(t,"data-transform-reset",JSON.stringify({transform:t.style.transform,"-webkit-transform":t.style.webkitTransform,"-webkit-transition":t.style.webkitTransition,transition:t.style.transition})),Object(a.css)(t,{transform:"none","-webkit-transform":"none","-webkit-transition":"none",transition:"none"}),e.transformed.push(t))})),Object(a.attr)(t.htmleditor,"data-fixed-parents",e.transformed)),t.editor.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:o.style.width,height:o.style.height},t.editor.state.fullScreenRestore.scrollTop=r,o.style.width="",o.style.height="".concat(Object(a.height)(t.content),"px")}else{document.documentElement.style.overflow="";var l=t.editor.state.fullScreenRestore;o.style.width=l.width,o.style.height=l.height,window.scrollTo(l.scrollLeft,l.scrollTop),"false"!==Object(a.data)(t.htmleditor,"fixed-parents")&&(e.transformed.forEach((function(t){Object(a.css)(t,JSON.parse(Object(a.data)(t,"transform-reset"))),Object(a.removeAttr)(t,"data-transform-reset")})),e.transformed=[],Object(a.removeAttr)(t.htmleditor,"data-fixed-parents"))}setTimeout((function(){t.fit(),Object(a.trigger)(window,"resize")}),50),setTimeout((function(){Object(a.toggleClass)(t.htmleditor,"uk-htmleditor-resize")}),100)}})),t.addShortcut(["Ctrl-S","Cmd-S"],(function(){Object(a.trigger)(t.$el,"htmleditor-save",[t])})),t.addShortcutAction("bold",["Ctrl-B","Cmd-B"])},initMarked:function(){var t=this,e=t.mdparser||window.marked||null;function i(){t.editor.setOption("mode","gfm"),Object(a.html)(Object(a.find)(".uk-htmleditor-button-code a",t.htmleditor),t.lblMarkedview)}function n(e,i,n){Object(a.on)(t.$el,"action.".concat(e),(function(){"markdown"==t.getCursorMode()&&t["replaceLine"==n?"replaceLine":"replaceSelection"](i)}))}e&&(t.markdown&&i(),n("bold","**$1**"),n("italic","*$1*"),n("strike","~~$1~~"),n("blockquote","> $1","replaceLine"),n("link","[$1](http://)"),n("image","![$1](http://)"),Object(a.on)(t.$el,"action.listUl",(function(){if("markdown"==t.getCursorMode()){for(var e=t.editor,i=e.getDoc().getCursor(!0),n=e.getDoc().getCursor(!1),r=i.line;r<n.line+1;r++)e.replaceRange("* ".concat(e.getLine(r)),{line:r,ch:0},{line:r,ch:e.getLine(r).length});e.setCursor({line:n.line,ch:e.getLine(n.line).length}),e.focus()}})),Object(a.on)(t.$el,"action.listOl",(function(){if("markdown"==t.getCursorMode()){var e,i=t.editor,n=i.getDoc().getCursor(!0),r=i.getDoc().getCursor(!1),o=1;if(n.line>0)(e=i.getLine(n.line-1).match(/^(\d+)\./))&&(o=Number(e[1])+1);for(var s=n.line;s<r.line+1;s++)i.replaceRange("".concat(o,". ").concat(i.getLine(s)),{line:s,ch:0},{line:s,ch:i.getLine(s).length}),o++;i.setCursor({line:r.line,ch:i.getLine(r.line).length}),i.focus()}})),Object(a.on)(t.$el,"renderLate",(function(){"gfm"==t.editor.options.mode&&(t.currentvalue=e(t.currentvalue))})),Object(a.on)(t.$el,"cursorMode",(function(e,i){if("gfm"==t.editor.options.mode){var n=t.editor.getDoc().getCursor();t.editor.getTokenAt(n).state.base.htmlState||(i.mode="markdown")}})),Object.assign(t,{enableMarkdown:function(){i(),this.render()},disableMarkdown:function(){this.editor.setOption("mode","htmlmixed"),Object(a.html)(Object(a.find)(".uk-htmleditor-button-code a",this.htmleditor),this.lblCodeview),this.render()}}),Object(a.on)(t.$el,"enableMarkdown",(function(){t.enableMarkdown()})),Object(a.on)(t.$el,"disableMarkdown",(function(){t.disableMarkdown()})))}}}),r.a.ready((function(){var t={object:c,target:".tm-navbar-container"},e={object:b,target:".tm-sidebar-left"};Theme.$mount([t,e]),Object(a.on)("#js-appnav","stop",(function(t){var e={};Object(a.toNodes)(this.children).forEach((function(t,i){e[t.getAttribute("data-id")]=i})),r.a.http.post("admin/adminmenu",{order:e})})),s.a.mixin({data:{timeout:1500}},"notification"),Object(a.toNodes)(Object(a.$)(".pk-system-messages").children).forEach((function(t){var e=t.dataset;e.status&&"success"===e.status&&(e.timeout=1500),s.a.notification(Object(a.html)(t),e),Object(a.remove)(t)})),s.a.modal.alert=function(t,e){return e=Object(a.assign)({bgClose:!1,escClose:!1,labels:s.a.modal.labels},e),new Promise((function(i){return Object(a.on)(s.a.modal.dialog("".concat(e.title?'<div class="uk-modal-header"><h4>'.concat(e.title,"</h4></div>"):"",'<div class="uk-modal-body">').concat(Object(a.isString)(t)?t:Object(a.html)(t),'</div> <div class="uk-modal-footer uk-text-right"> <button class="uk-button uk-button-primary uk-modal-close" autofocus>').concat(e.labels.Ok,"</button> </div> "),e).$el,"hide",i)}))},s.a.modal.confirm=function(t,e){return e=Object(a.assign)({bgClose:!1,escClose:!0,labels:s.a.modal.labels},e),new Promise((function(i,n){var r=s.a.modal.dialog(" <form>".concat(e.title?'<div class="uk-modal-header"'.concat(t?"":' style="border-bottom: 0;"',"><h4>").concat(e.title,"</h4></div>"):""," ").concat(t?'<div class="uk-modal-body">'.concat(Object(a.isString)(t)?t:Object(a.html)(t),"</div>"):"",' <div class="uk-modal-footer uk-text-right"> <button class="uk-button uk-button-text uk-margin-right uk-modal-close" type="button">').concat(e.labels.cancel,'</button> <button class="uk-button uk-button-primary" autofocus>').concat(e.labels.ok,"</button> </div> </form> "),e),o=!1;Object(a.on)(r.$el,"submit","form",(function(t){t.preventDefault(),i(),o=!0,r.hide()})),Object(a.on)(r.$el,"hide",(function(){o||n()}))}))},s.a.modal.prompt=function(t,e,i,n){return n=Object(a.assign)({bgClose:!1,escClose:!0,labels:s.a.modal.labels},n),new Promise((function(r){var o=s.a.modal.dialog(' <form class="uk-form-stacked">'.concat(n.title?'<div class="uk-modal-header"><h4>'.concat(n.title,"</h4></div>"):"",' <div class="uk-modal-body"> <label class="uk-form-label">').concat(Object(a.isString)(t)?t:Object(a.html)(t),'</label> <input class="uk-input" autofocus> </div> <div class="uk-modal-footer uk-text-right"> <button class="uk-button uk-button-text uk-margin-right uk-modal-close" type="button">').concat(n.labels.cancel,'</button> <button class="uk-button uk-button-primary">').concat(n.labels.ok,"</button> </div> </form> "),n),c=Object(a.$)("input",o.$el);c.value=e;var l=!1;Object(a.on)(o.$el,"submit","form",(function(t){t.preventDefault(),i(c.value),r(c.value),l=!0,o.hide()})),Object(a.on)(o.$el,"hide",(function(){l||r(null)}))}))},s.a.tooltip(".tm-toggle-sidebar button",{pos:"right",delay:200})}))}]);